<!DOCTYPE html>
<html>
<head>
	<title>Node world server</title>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  	<script type="text/javascript" src="js/main.js"></script>
</head>
<body>
	<div id="functionalities">
  	<ul>
    	<li><a href="#timezones_view"><%= __('Timezones_visualization')%></a></li>
    	<li><a href="#github_view"><%= __('GitHub_visualization')%></a></li>
  	</ul>
  	<div id="timezones_view">
		<div id="forms_displayer">
			<p>
				<form id="choosen_language_form" method="post" action="/">
					<input type="hidden" name="current_form" value="choosen_language_form">
					<%= __('Language_choice')%> :
					<select id="choosen_language" name="choosen_language">
						<% for(var i = 0; i < selectionnableLanguages.length; i++){ %>
							<option value="<%= selectionnableLanguages[i].value %>" <%= selectionnableLanguages[i].selected %>><%= __(selectionnableLanguages[i].text)%></option>
						<% } %>
					</select>
				</form>
				<form id="choosen_format_form" method="post" action="/">
					<input type="hidden" name="current_form" value="choosen_format_form">
					<%= __('Date_and_time_format_choice')%> :
					<select id="choosen_date_and_time_format" name="choosen_date_and_time_format">
						<% for(var i = 0; i < formats.length; i++){ %>
							<option value="<%= formats[i].id %>" <%= formats[i].selected %>><%= formats[i].format %></option>
						<% } %>
					</select>
				</form>
				<form id="choosen_country_code_form" method="post" action="/">
					<input type="hidden" name="current_form" value="choosen_country_code_form">
					<%= __('countrycode_timezone_choice')%> :
					<select id="choosen_country_code" name="choosen_country_code">
						<% for(var countryCode in countryCodeHashTable){ %>
							<option value="<%= countryCode %>" <%= countryCodeHashTable[countryCode] %>><%= countryCode %></option>
						<% } %>
					</select>
				</form>
				<h1><%= __('Hello')%></h1>
			</p>
		</div>
		<div id="timezones_displayer">
			<% for(var i = 0; i < timezones.length; i++){ %>
				<h3 style="color: <%= timezones[i].color %>"><%= timezones[i].timezone %> (<%= timezones[i].country_code %>): <%= timezones[i].moment.format(currentDateAndTimeFormat) %></h3>
				<div>
					<p>
						<% if(weatherResults[i].cod === 200) { %>

							<div>
								<div style="float: left;">
									<img src="<%= weatherResults[i].weather_icon %>" alt="weather illustration">
								</div>
								<div class="weather_tab" id="dt_tab" style="float: left; margin-left: 10px;">
									<table>
										<tbody>
											<tr>
									        	<td>Description: <%= weatherResults[i].weather_description %></td>
									        </tr>
									        <tr>
									        	<td>Localisation: (<%= weatherResults[i].longitude %>, <%= weatherResults[i].latitude %>)</td>
									        </tr>
									        <tr>
									        	<td>UV: <%= weatherResults[i].uv_value %></td>
									        </tr>
									        <tr>
									            <td>Sunrise time: <%= weatherResults[i].sys_sunrise %></td>
									        </tr>
									        <tr>
									        	<td>Sunset time: <%= weatherResults[i].sys_sunset %></td>
									        </tr>
									    </tbody>
									</table>
								</div>
								<div class="weather_tab" id="temp_tab" style="float: left; margin-left: 10px;">
									<table>
										<tbody>
											<tr>
												<td>Pressure (hPa): <%= weatherResults[i].main_pressure %></td>
											</tr>
									        <tr>
									            <td>Temperature (K): <%= weatherResults[i].main_temp %></td>
									        </tr>
									        <tr>
									        	<td>Maximum temperature (K): <%= weatherResults[i].main_temp_max %></td>
									        </tr>
									        <tr>
									            <td>Minimum temperature (K): <%= weatherResults[i].main_temp_min %></td>
									        </tr>
									        <tr>
									        	<td>Feeling like temperature (K): <%= weatherResults[i].main_feels_like %></td>
									        </tr>
									    </tbody>
									</table>
								</div>
							</div>

						<% } else { %>

							<% if(weatherResults[i].message === "city not found"){ %>

								<%= __('City_not_found')%>

							<% } else if(weatherResults[i].message === "Invalid API key. Please see http://openweathermap.org/faq#error401 for more info.") { %>

								<%= __('Invalid_api_key')%>

							<% } %>

						<% } %>
					</p>
				</div>
			<% } %>
		</div>
  </div>
  <div id="github_view">
  	<p>
  		<form id="second_choosen_language_form" method="post" action="/">
					<input type="hidden" name="current_form" value="choosen_language_form">
					<%= __('Language_choice')%> :
					<select id="second_choosen_language" name="choosen_language">
						<% for(var i = 0; i < selectionnableLanguages.length; i++){ %>
							<option value="<%= selectionnableLanguages[i].value %>" <%= selectionnableLanguages[i].selected %>><%= __(selectionnableLanguages[i].text)%></option>
						<% } %>
					</select>
		</form>
  		<h1><%= __('Hello')%></h1>
  	</p>
    <p>
    	<%= __('Ragnarok')%>
    </p>
  </div>
</div>
</body>
</html>
